
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Black Hole Raytracer | CS 184</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="main.css"/>
<link rel="stylesheet" type="text/css" href="res/featherlight.min.css" />
<link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Open+Sans:400,700">
</head>
<body>

<section class="header">

<h1>Final Project: Black Hole Raytracer</h1>
<h2>Arman T (SID), Casper Y (SID), Lulu W (SID)</h2>

</section>

<section class="content">

<section class="partIntro">
<p>Black hole raytracer made using python from scratch. Rendered using image library PIL (Pillow).</p>
</section>

<section class="partTOC">
<h3>Table of Contents</h3>
<ol start="0">
<li><a href="#abstract">Abstract</a></li>
<li><a href="#approach">Technical Approach</a></li>
<li><a href="#results">Results</a></li>
<li><a href="#references">References</a></li>
</ol>
</section>

<section class="abstract">
<a name="abstract" class="anchor"><h3>Abstract</h3></a>

<p>For this final project for CS184, our group made a black hole raytracer utilizing Python's image library PIL (Pillow) to render
the resulting images. The result was a black hole as shown through a surrounding accretion disk which is colored non-black.
Our logic was based on both physics principles of black holes (ie/ using black hole mass to calculate event horizon radius for
determining luminance) as well as graphics principles (ie/ ray casting/tracing). </p>

<p>The program is run simply through running the main function, which will render an image of a black hole and accretion disk utilizing
  object classes written, and save it to an image (png) file.</p>
</section>

<section class="approach">
<a name="approach" class="anchor"><h3>Technical Approach</h3></a>

<a name="approach-1" class="anchor"><h4>Setup</h4></a>
<p>Since this project involves using light rays cast from the camera to the scene, we had to use largely the same logic of raytracing
from project 3. However, writing it from scratch turned out to be a lot less tedious than porting over segments of code from project 3
itself.  We created different classes for the objects needed (black hole and accretion disk objects) in the scene, as well as the tools needed for the renderer
(camera, renderer, world). Lastly, we utilized the logic for spectrum and ray objects from project 3 in order to write our own <code>ray.py</code>
and <code>spectrum.py</code> classes.</p>

<p>Our objects comprise of black hole and accretion disk objects. Their compositions are as shown:</p>
<div class="codeWrapper">
<code>class BlackHole:
    def init(...):
      self.origin
      self.mass
      self.radius
    def hit_by_ray(...)
    def get_luminance(...)
</code>
</div>
<br />
<div class="codeWrapper">
<code>class Disk:
    def init(...):
      self.origin
      self.mass
      self.inner_radius
      self.outer_radius
      self.normal
    def _intersects_plane(...)
    def hit_by_ray(...)
    def get_luminance(...)
</code>
</div>

<p>
  Based on research regarding the physics of light bending behavior surrounding black holes, we were able to deduct the manner in which we
  would be able to visualize the black hole along with its accretion disk (comprising, in real life, of orbiting diffuse material but shown
  in our renders as a solid colored disk around the black hole sphere). We drew out the initial visualization using a painting application
  as shown:
</p>

<div align="middle">
  <table style="width=100%">
    <tr>
      <p>
        Initial visualization idea:
      </p>
      <td>
        <img src="images/orig_idea.png" align="middle" width="300px"/>
        <figcaption align="middle">black hole with surrounding accretion disk</figcaption>
      </td>
    </tr>

  </table>
</div>


<p>Next, our group worked on the logic for writing our own renderer from scratch. This would allow us to do accurate raytracing
and to visualize our physics. Our final renderer in <code>renderer.py</code> utilizes the python image library Pillow (PIL) in order
to create a new image with inputted camera resolution (image size). Then we are able to cast rays from the camera into the world/scene,
allowing us to visualize the physics of light behavior around a black hole defined by a position, mass and radius. Our main
rendering pipeline is as such expressed by looping over the pixels:</p>


<div class="codeWrapper">
<code>for pixel in image:
    camera.cast_ray(pixel)
    luminance = ray.simulate_to_end(world.objects)
    image.putpixel(pixel, luminance)
</code>
</div>

<p>We did not happen to utilize subpixels and supersampling, and thus the renderer itself was quite simple and implemented on a
per pixel sampling basis.</p>

<p>As for the actual raytracing logic, the simulate_to_end method in <code>ray.py</code> allowed us to utilize light physics as well as
time stepping along with the raycasting hit logic for the objects in the scene, the accretion disk and the black hole itself. simulate_to_end
outputs a Spectrum object which is the appropriate color for visualizing different objects.</p>

<p>
  INSERT DETAILS OF RAYTRACING HERE + PHYSICS EQUATIONS
</p>

<a name="approach-3" class="anchor"><h4>Problems Encountered</h4></a>
<p></p>

<p>
</p>

<a name="approach-4" class="anchor"><h4>Lessons Learned</h4></a>
<p></p>

</section>

<section class="results">
<a name="results" class="anchor"><h3>Results</h3></a>

<a name="results-1" class="anchor"><h4>With colored grid</h4></a>
<p>The following is a series of renderings of the black hole with a grid background showing the light interaction at different camera angles.</p>
<div class="imgholder"><table><tr><td>
  <div>
    <tr>
        <td>
          <img src="images/grid_nodisk.png" align="middle" width="300px"/>
          <figcaption align="middle">initial rendering of black hole without accretion disk</figcaption>
        </td>
    </tr>
  </div>
  <div align="middle">
    <table style="width=100%">
      <tr>
        <p>
          Renderings of black hole with accretion disk:
        </p>
    <td>
      <img src="images/grid1.png" align="middle" width="300px"/>
    </td>
    <td>
      <img src="images/grid2.png" align="middle" width="300px"/>
    </td>
    <td>
      <img src="images/grid3.png" align="middle" width="300px"/>
    </td>
  </tr>
  <tr>
    <td>
      <img src="images/grid4.png" align="middle" width="300px"/>
    </td>
    <td>
      <img src="images/grid5.png" align="middle" width="300px"/>
    </td>
    <td>
      <img src="images/grid6.png" align="middle" width="300px"/>
    </td>
  </tr>
</table>
</div>

</td></tr></table></div>

<a name="results-2" class="anchor"><h4>Black and white renderings</h4></a>
<p>The following is a rendering of the black hole visualized using only the light interaction from the accretion disk.</p>
<div align="middle">
  <table style="width=100%">
  <tr>
    <td>
      <img src="images/bw_render.png" align="middle" width="300px"/>
    </td>
    <td>
      <img src="images/bw_render2.jpg" align="middle" width="300px"/>
    </td>
    <td>
      <img src="images/bw_render_lowres.png" align="middle" width="300px"/>
    </td>
  </tr>
  <figcaption>Rendering of black hole using white accretion disk</figcaption>
</table>
</div>
</td></tr></table></div>

<a name="results-3" class="anchor"><h4>Other renderings</h4></a>
<p>The following are fun renderings we did just to test the effects of altering physics parameters on light interaction.</p>
<div align="middle">
  <table style="width=100%">
  <tr>
    <td>
      <img src="images/no_gravity.png" align="middle" width="300px"/>
      <figcaption align="middle">zero gravity</figcaption>
    </td>
    <td>
      <img src="images/grid_binary.png" align="middle" width="300px"/>
      <figcaption align="middle">binary system</figcaption>
    </td>
    <td>
      <img src="images/grid_extra2.png" align="middle" width="300px"/>
      <figcaption align="middle">INSERT LABEL HERE</figcaption>
    </td>
  </tr>
</table>
</div>
</td></tr></table></div>

</section>

<section class="references">
<a name="references" class="anchor"><h3>Part 3: References</h3></a>

<a name="ref1" class="ref">[1]</a>
<a href="https://devblogs.nvidia.com/gpu-accelerated-black-hole-simulations/">
INSERT REF HERE
Retrieved from:
https://devblogs.nvidia.com/gpu-accelerated-black-hole-simulations/.</a></br>

<a name="ref2" class="ref">[2]</a>
<a href="https://github.com/seva100/blackhole-simulation">
  INSERT REF HERE
  Retrieved from:
https://github.com/seva100/blackhole-simulation.</a></br>

<a name="ref3" class="ref">[3]</a>
<a href="https://en.wikipedia.org/wiki/Accretion_disk">
  INSERT REF HERE
  Retrieved from:
https://en.wikipedia.org/wiki/Accretion_disk.</a></br>
</section>

</section>

</div>

<script type="text/javascript" src="res/jquery-2.2.2.min.js"></script>
<script type="text/javascript" src="res/featherlight.min.js"></script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>
